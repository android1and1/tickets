// Generated by CoffeeScript 2.3.2
(function() {
  $(function() {
    $('button#switch').on('click', function(evt) {
      var left, right;
      left = $('.left');
      right = $('.right');
      if (left.hasClass('hidden')) {
        // right animate first ,then left.
        return right.animate({
          width: '15%'
        }, 10, function() {
          // 给个遮罩效果
          $('#rightmodal').toggleClass('hidden');
          return left.removeClass('hidden').animate({
            width: '85%'
          }, 700); // no .hidden
        });
      } else {
        return left.animate({
          width: '0%'
        }, 600, function() {
          // 去除遮罩
          $('#rightmodal').toggleClass('hidden');
          return right.animate({
            width: '100%'
          }, 150, function() {
            return left.addClass('hidden');
          });
        });
      }
    });
    $('#adminLogout').on('click', function(e) {
      var that;
      that = this;
      e.preventDefault();
      e.stopPropagation();
      return $.ajax({
        url: '/admin/logout',
        type: 'PUT',
        dataType: 'json'
      }).done(function(json) {
        var theli;
        alert(json.status);
        // disable this link.
        theli = $(that).parent();
        return theli.addClass('disabled');
      }).fail(function(xhr, status, thrown) {
        console.log(status);
        return console.log(thrown);
      });
    });
    return $('#userLogout').on('click', function(e) {
      var that;
      that = this;
      e.preventDefault();
      e.stopPropagation();
      return $.ajax({
        url: '/user/logout',
        type: 'PUT',
        dataType: 'json'
      }).done(function(json) {
        var theli;
        alert(json.status);
        // disable this link.
        theli = $(that).parent();
        return theli.addClass('disabled');
      }).fail(function(xhr, status, thrown) {
        console.log(status);
        return console.log(thrown);
      });
    });
  });

}).call(this);
